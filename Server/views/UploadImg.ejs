<% layout('/layouts/boilerPlate') %>

<link rel="stylesheet" href="/css/uploadImg.css">

<!-- Hero Section -->
<section class="hero">
  <h2>Upload Your Chest Scan</h2>
  <p>AI-powered analysis of your CT / X-Ray scan for possible signs of lung cancer.</p>
</section>

<!-- Upload Box -->
<section class="upload-container">
  <form id="uploadForm" enctype="multipart/form-data" action="/Upload/result" method="POST">
    <div class="upload-box" id="uploadBox">
      <input type="file" name="scan" id="fileInput" accept=".jpg,.jpeg,.png" required hidden>
      <label for="fileInput" id="fileLabel">
        <span class="upload-icon">ðŸ“‚</span>
        <p>Drag & Drop your file here or <span class="browse">Browse</span></p>
        <p class="file-types">Supported formats: JPG, PNG</p>
      </label>
    </div>

    <!-- Image Preview -->
    <div class="preview-container" id="previewContainer">
      <img id="previewImage" src="#" alt="Preview" hidden>
      <p id="previewText">No file chosen yet</p>
    </div>

    <button type="submit" class="upload-btn">Analyze Scan</button>
  </form>
</section>

<!-- Info Section -->
<section class="info">
  <h3>â„¹ Usage Disclaimer</h3>
  <p>This tool is designed to support both <strong>medical professionals</strong> and <strong>students/researchers</strong>.  
  It can assist in analysis and decision-making but should be used as a <strong>complement</strong> to clinical expertise, not as a replacement.  
  Final diagnosis and treatment decisions must always be made by a qualified healthcare provider.</p>
</section>

<!-- Prediction Result -->
<div id="resultBox" class="result-box"></div>

<!-- Script -->
<script>
  const fileInput = document.getElementById("fileInput");
  const previewImage = document.getElementById("previewImage");
  const previewText = document.getElementById("previewText");
  const form = document.getElementById("uploadForm");
  const resultBox = document.getElementById("resultBox");

  // Show preview of image
  fileInput.addEventListener("change", () => {
    const file = fileInput.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = e => {
        previewImage.src = e.target.result;
        previewImage.hidden = false;
        previewText.style.display = "none";
      };
      reader.readAsDataURL(file);
    } else {
      previewImage.hidden = true;
      previewText.style.display = "block";
    }
  });

 
</script>
